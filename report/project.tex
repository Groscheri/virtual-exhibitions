\documentclass[a4paper,11pt]{report}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage[font=small,labelfont=bf, textfont=it]{caption}
%\usepackage[top=1.5cm, bottom=1.5cm, left=2cm, right=2cm]{geometry} % to change padding
\usepackage{verbatim}
\usepackage{subcaption} % for multi figure
\usepackage{enumitem} % -- label item
\usepackage{tabularx} % table
\usepackage{color}
\usepackage[usenames, dvipsnames]{xcolor} % color
\usepackage[framemethod=TikZ]{mdframed} % box
\usepackage{listings} % code
%\usepackage{amsmath} % align* maths
\usepackage[bookmarks, hidelinks, linktoc=all]{hyperref} % clickable links
\usepackage{graphicx} % includegraphics
\usepackage{indentfirst} % indentation
\usepackage{titlesec} % spacing between sections
\usepackage{multicol} % multi columns
\usepackage{amssymb}
\usepackage{tikz}
\usetikzlibrary{shapes,arrows}
% \usepackage{tocloft}
%\setlength\cftaftertoctitleskip{50pt} % toc space after title
%\setlength{\cftbeforetoctitleskip}{-3em} % toc space before title

\setlength\parindent{0pt}
\setlength{\parskip}{0.9em} % paragraph vertical space

\renewcommand\thesection{\arabic{section}} % start section from 1
\setcounter{tocdepth}{1} % display subsection in toc
\setcounter{secnumdepth}{3} % number subsubsection

% space before lists
%\setlist[itemize]{topsep=0pt}
%\setlist[enumerate]{topsep=0pt}

% spacing between figure and caption
% \setlength{\abovecaptionskip}{2pt plus 2pt minus 4pt} % default: 10pt

% Titre
% \title{Distributed Artificial Intelligence \& Intelligent Agents \\ DAIIA - Project}
% \author{Laurentiu CAPATINA \& Quentin LEMAIRE}

\begin{document}

  % first page
  \pagenumbering{Alph}
\begin{titlepage}
  \centering
  \vspace*{\stretch{1}}
  \vfill
    {\bfseries\Large{
	Distributed Artificial Intelligence\\\&\\Intelligent Agents}
    }
  \vfill
  \vfill
    \Huge{\textsc{Smart Museum}}
    \\\vspace{10pt}
    \Large{Project report}
  \vfill
      \Large{\textsc{Laurentiu Capatina} \& \textsc{Quentin Lemaire}}
    \\
  \vspace{0.4cm}
    Group 5
  \vfill
  \vfill
    % \includegraphics[width=0.22\textwidth]{media/kth.jpg}
    KTH Royal Institute of Technology
  \vfill
    \today
  \vspace*{\stretch{1}}
  \thispagestyle{empty}
\end{titlepage}
\pagenumbering{arabic}

\addtocontents{toc}{\protect\thispagestyle{empty}} % remove toc pagination
\tableofcontents{} % toc
\clearpage % leave a page
\setcounter{page}{1} % init counter page

  \section{Introduction}
  % TODO describe aim of the project
  % TODO describe briefly different tasks
  
  This project deals with \textbf{Agent Oriented Software Engineering} (AOSE) in the 
  context of a virtual exhibitions (smart museum). The aim is to model a multi-agent 
  system with specific methods of modelisation: GAIA and Role-base modeling.
  As a consequence of the previous works, this project reuses concepts we learnt 
  during lectures and homeworks: behaviors, messaging, negotiation, mobility, ...
  
  
  %%%%%%
  
  
  \section{GAIA Methodology} % task 1
  % Model your system via GAIA AOSE Methodology
  % Agent Oriented Sofware Engineering (AOSE)
  
  \subsection{Requirements statement}
  % TODO text describing the scenario
  
  In the smart museum scenario, we have different actors: artist managers, curators 
  and profilers.
  
  Firstly, the artist manager is responsible to gather paintings or art creations 
  from a set of different artists he or she is in contact with. The goal of the manager 
  is to sell products with different quality level to profilers.
  
  In order to sell paintings to profilers, the artist manager has to use curators as retailers 
  because they don't know profilers directly. The curators are associated to a museum and there
  is only one for each museum. In our model we have 2 museums and consequently 2 curators. The artist manager 
  provides a product with an announced price to curators who will afterwards
  sell it to profilers. Because there are 2 curators and only one of them can buy 
  the product, curators have to visit the artist manager in order to take part in a Dutch auction. 
  This auction will determine which curator gets the product.
  
  Finally, the profiler receives suggestions of products offered by curators and can choose whether he or 
  she wants to buy the product at the displayed price or not.
  
  % TODO put schemes (the one in instructions ?)
  
  \subsection{Roles model}
  % TODO tables
  
  Different roles can be modeled in our scenario:
  \begin{itemize}
   \item Artist Manager role (described in Figure~\ref{figure:role_artist_manager})
   \item Curator role (described in Figure~) % TODO
   \item Profiler role (described in Figure~) % TODO
  \end{itemize}

  % TODO
  \begin{figure}[ht!]
    \begin{mdframed}
      Role Schema: \textsc{Artist Manager} \\ \hrule \vspace{2pt} \hrule \vspace{10pt}
      Description:\\
      Gathers high or low quality products and acts as auctioneer with Curators.
      \\ \hrule \vspace{10pt}
      Protocols and Activities:
      \vspace{-10pt}
      \begin{flushleft}
       \underline{ChooseHighOrLowQualityProduct}, 
       %WaitTwoOrMoreCurators, 
       DutchAuction 
       %WaitMoneyOrProductBack
      \end{flushleft}
      \hrule \vspace{10pt}
      Permissions:\\
      \vspace{-10pt}
      \begin{center}
       generates \textit{painting //new painting to sell}
      \end{center}
      % ask "artist" to product high or low quality product
      % auction product
      \hrule \vspace{10pt}
      Responsabilities:\\
      Liveness:
      \vspace{-10pt}
      \begin{flushleft}
      \small\textsc{Artist Manager} = (\underline{ChooseHighOrLowQualityProduct}, 
      %WaitTwoOrMoreCurators, 
      DutchAuction 
      %WaitMoneyOrProductBack
      )$^\omega$
      \end{flushleft}
      Safety:
      \vspace{-10pt}
      \begin{itemize}
       \item $money > 0$
       \item $paintings \geq 0$
      \end{itemize}
 % TODO
    \end{mdframed}
  \caption{Artist manager role}
  \label{figure:role_artist_manager}
  \end{figure}
  
  
  \begin{figure}[ht!]
    \begin{mdframed}
      Role Schema: \textsc{Curator} \\ \hrule \vspace{2pt} \hrule \vspace{10pt}
      Description:\\
      This role can be seen as an intermediate for selling paintings between the Profiler
      and the Artist Manager.
      \\ \hrule \vspace{10pt}
      Protocols and Activities:
      \vspace{-10pt}
      \begin{flushleft}
       \underline{DefineStrategy}, DutchAuction,
       \underline{DefineNewPrice},
       ProposeProduct, WaitResponse
      \end{flushleft}
      \hrule \vspace{10pt}
      Permissions:\\
      \vspace{-10pt}
      \begin{center}
       reads \textit{paintingName //name of the painting}\\
	    \textit{offer //offer received for auction}\\
       changes \textit{strategy //strategy for auction}\\
       \textit{paintingPrice //new price for painting}
      \end{center}
      % ask "artist" to product high or low quality product
      % auction product
      \hrule \vspace{10pt}
      Responsabilities:\\
      Liveness:
      \vspace{-10pt}
      \begin{flushleft}
      \small\textsc{Curator} = \underline{DefineStrategy}(DutchAuction, $\mid$\underline{DefineNewPrice},
       ProposeProduct, WaitResponse$\mid$)$^\omega$
      \end{flushleft}
      Safety:
      \vspace{-10pt}
      \begin{itemize}
      \item $budget > 0$
       \item $paintings \geq 0$
       \item $paintingPrice > 0$
       \item $stratregy$ is not NULL
       \item $bidAccepted \leq budget$
      \end{itemize}
 % TODO
    \end{mdframed}
  \caption{Curator role}
  \label{figure:role_curator}
  \end{figure}
  
  \begin{figure}[ht!]
    \begin{mdframed}
      Role Schema: \textsc{Profiler} \\ \hrule \vspace{2pt} \hrule \vspace{10pt}
      Description:\\
      The aim of the profiler is to buy painting from Curators at the best possible
      price for a high quality product.
      and the Artist Manager.
      \\ \hrule \vspace{10pt}
      Protocols and Activities:
      \vspace{-10pt}
      \begin{flushleft}
       \underline{DefineBudget}, WaitOffer, BuyProduct
       RejectProduct
      \end{flushleft}
      \hrule \vspace{10pt}
      Permissions:\\
      \vspace{-10pt}
      \begin{center}
       reads \textit{paintingName //name of the painting}\\
	    \textit{offer //offer for product}\\
      changes \textit{budget //budget for paintings}
      \end{center}
      % ask "artist" to product high or low quality product
      % auction product
      \hrule \vspace{10pt}
      Responsabilities:\\
      Liveness:
      \vspace{-10pt}
      \begin{flushleft}
      \small\textsc{Curator} = \underline{DefineStrategy}, (WaitOffer, BuyProduct $\mid$
      RejectProduct)$^\omega$
      \end{flushleft}
      Safety:
      \vspace{-10pt}
      \begin{itemize}
      \item $budget > 0$
       \item \textit{offerAccepted} $\leq budget$
      \end{itemize}
 % TODO
    \end{mdframed}
  \caption{Profiler role}
  \label{figure:role_profiler}
  \end{figure}
  
  
  \subsection{Interaction Model}
  % ArtistManager -> Curators: DutchAuction
  % Curators -> Profiler: proposeProduct, waitResponse
  % Profiler -> Curator: waitOffer, buyProduct, rejectProduct

  The 3 roles of our model interact with each other through protocols. Artist Manager 
  communicates with Curators thanks to Dutch Auction Protocol (see Table~\ref{table:dutch_auction_protocol}). 
  Curators communicate with Profiler with 2 different protocols: Propose Product 
  Protocol (Table~\ref{table:propose_product_protocol}) and Wait Response Protocol (see Table~\ref{table:wait_response_protocol}). 
  Finally, Profiler interacts with Curators through 3 different protocols: Wait Offer Protocol (see Table~\ref{table:wait_offer_protocol}), 
  Buy Product Protocol (see Table~\ref{table:buy_product_protocol}) and Reject Product Protocol (see Table~\ref{table:reject_product_protocol}).
  
  \newcolumntype{C}[1]{>{\centering}m{#1}}
  
  % dutchAuction
  \begin{table}[ht!]
  \centering
  \begin{tabular}{|c|l|c|l|ll}
  \cline{1-4}
  \multicolumn{4}{|c|}{Dutch Auction}   &  &  \\ \cline{1-4}
  \multicolumn{2}{|C{3.5cm}|}{ArtistManager} & \multicolumn{2}{C{3.5cm}|}{Curators} &  & product \\ \cline{1-5}
  \multicolumn{4}{|m{7cm}|}{Process a Dutch Auction in order to buy product offered by ArtistManager}  &  & winner (Curator + price) \\ \cline{1-5}
  \end{tabular}
  \caption{Dutch Auction protocol}
  \label{table:dutch_auction_protocol}
  \end{table}
  
  % proposeProduct
  \begin{table}[ht!]
  \centering
  \begin{tabular}{|c|l|c|l|ll}
  \cline{1-4}
  \multicolumn{4}{|c|}{Propose Product}   &  &  \\ \cline{1-4}
  \multicolumn{2}{|C{3.5cm}|}{Curator} & \multicolumn{2}{C{3.5cm}|}{Profiler} &  & offer (product + price) \\ \cline{1-5}
  \multicolumn{4}{|m{7cm}|}{Propose a product to Profiler}  &  & - \\ \cline{1-5}
  \end{tabular}
  \caption{Propose Product protocol}
  \label{table:propose_product_protocol}
  \end{table}
  
  % waitResponse
    \begin{table}[ht!]
  \centering
  \begin{tabular}{|c|l|c|l|ll}
  \cline{1-4}
  \multicolumn{4}{|c|}{Wait Response}   &  &  \\ \cline{1-4}
  \multicolumn{2}{|C{3.5cm}|}{Curator} & \multicolumn{2}{C{3.5cm}|}{Profiler} &  & - \\ \cline{1-5}
  \multicolumn{4}{|m{7cm}|}{Wait a response from the Profiler}  &  & response (accept or reject) \\ \cline{1-5}
  \end{tabular}
  \caption{Wait Response protocol}
  \label{table:wait_response_protocol}
  \end{table}
  
  % waitOffer
  \begin{table}[ht!]
  \centering
  \begin{tabular}{|c|l|c|l|ll}
  \cline{1-4}
  \multicolumn{4}{|c|}{Wait offer}   &  &  \\ \cline{1-4}
  \multicolumn{2}{|C{3.5cm}|}{Profiler} & \multicolumn{2}{C{3.5cm}|}{Curator} &  & - \\ \cline{1-5}
  \multicolumn{4}{|m{7cm}|}{Wait offer from a Curator}  &  & offer (product + price) \\ \cline{1-5}
  \end{tabular}
  \caption{Wait Offer protocol}
  \label{table:wait_offer_protocol}
  \end{table}
  
  % buyProduct
  \begin{table}[ht!]
  \centering
  \begin{tabular}{|c|l|c|l|ll}
  \cline{1-4}
  \multicolumn{4}{|c|}{Buy product}   &  &  \\ \cline{1-4}
  \multicolumn{2}{|C{3.5cm}|}{Profiler} & \multicolumn{2}{C{3.5cm}|}{Curator} &  & money \\ \cline{1-5}
  \multicolumn{4}{|m{7cm}|}{Buy a product proposed by a Curator}  &  & product \\ \cline{1-5}
  \end{tabular}
  \caption{Buy product protocol}
  \label{table:buy_product_protocol}
  \end{table}
  
  % rejectProduct
  \begin{table}[ht!]
  \centering
  \begin{tabular}{|c|l|c|l|ll}
  \cline{1-4}
  \multicolumn{4}{|c|}{Reject product}   &  &  \\ \cline{1-4}
  \multicolumn{2}{|C{3.5cm}|}{Profiler} & \multicolumn{2}{C{3.5cm}|}{Curator} &  & - \\ \cline{1-5}
  \multicolumn{4}{|m{7cm}|}{Reject a product proposed by a Curator}  &  & - \\ \cline{1-5}
  \end{tabular}
  \caption{Reject product protocol}
  \label{table:reject_product_protocol}
  \end{table}
  
  \subsection{Agent Model}
  % Identification of each agent type
  
  % Artist Manager -> 1 ArtistManagerAgent
  % Curator -> + CuratorAgent
  % Profiler -> 1 ProfilerAgent
  
  Agent model is describe below in Figure~\ref{figure:agent_model}.
  
\tikzstyle{block} = [rectangle, draw, %fill=blue!20, 
    text width=8em, text centered, rounded corners, minimum height=2em]
\tikzstyle{line} = [draw, -latex']
    
\begin{figure}[ht!]
\begin{tikzpicture}[node distance = 4cm, auto]
    % Place nodes
    \node [block] (ama) {ArtistManager Agent};
    \node [block, above of=ama, node distance=2cm] (am) {ArtistManager};
    
    \node [block, right of=ama] (cua) {Curator Agent$_m$};
    \node [block, above of=cua, node distance=2cm]  (cu) {Curator};

    \node [block, right of=cua] (proa) {Profiler Agent};
    \node [block, above of=proa, node distance=2cm] (pro) {Profiler};
    
    \path [line] (am) -- node {1}(ama);
    \path [line] (cu) -- node {2}(cua);
    \path [line] (pro) -- node {1}(proa);
\end{tikzpicture}
\caption{Agent model. ``m'' stands for a ``mobile'' agent.}
\label{figure:agent_model}
\end{figure}

  
  \subsection{Service Model}
  % TODO for each protocol
  % Service | Input | Output | Preconditions | Postconditions
  
  The Table~\ref{table:service_model} describes all services.
  
  \newcommand*{\thead}[1]{\multicolumn{1}{c}{\bfseries #1}}
  \begin{table}[ht!]
  \begin{tabular}{|l|l|l|l|l|}
  \thead{Service} & \thead{Input} & \thead{Output} & \thead{Preconditions} & \thead{Postconditions} \\\hline
  - & - & - & - & - \\ \hline
  - & - & - & - & - \\ \hline
  \end{tabular}
  
  \caption{Service model}
  \label{table:service_model}
  \end{table}

  
  % DutchAuction (ArtistManagerAgent <-> CuratorAgent(s))
  % ExploreProducts (ProfilerAgent <-> CuratorAgent(s))
  % BuyProduct (ProfilerAgent <-> CuratorAgent)
  
  \subsection{Acquaintance Model}
  % Show the communication links between the agents
  % ArtistManagerAgent <-> CuratorAgent(s) <-> Profiler
  
  Figure~\ref{figure:acquaintance_model} shows the communication links between the agents. 
  Indeed, ArtistManagerAgent communicates with CuratorAgents and the latter communicate with 
  ProfilerAgent.
  
  \begin{figure}[ht!]
\begin{tikzpicture}[node distance = 4cm, auto]
    % Place nodes
    \node [block] (ama) {ArtistManager Agent};
    \node [block, right of=ama] (cua) {Curator Agent};
    \node [block, right of=cua] (proa) {Profiler Agent};
    
    \draw[open triangle 45-open triangle 45] (ama) -- (cua);
    \draw[open triangle 45-open triangle 45] (cua) -- (proa);
\end{tikzpicture}
\caption{Acquaintance model}
\label{figure:acquaintance_model}
\end{figure}
  
  \subsection{Mobility Model}
  % TODO
  % a. Identification of place types (example: Museo Galileo
  % Museum).  
  % b. Identification of relationships between agent types and
  % place types
  % c. Definition of the cardinality between agent types and
  % place types
  % d. Identification of the travel path of each mobile agent
  
  % CuratorAgent(s) move to ArtistManagerAgent place!

  \subsubsection{Place types}
    In the scenario, there are 4 places described in more details in Table~\ref{table:mobility_places}:
  \begin{itemize}
   \item 2 museums: Museo Galileo \& Museo Heritage Malta
   \item 1 house (corresponding to the mobile application)
   \item 1 office (corresponding to the Artist Manager's office)
  \end{itemize}
  
  \begin{table}[ht!]
  \centering
  \begin{tabular}{|c|l|c|}
   \thead{Place Types} & \thead{Description} & \thead{Instances} \\ \hline \hline
   Office & Place where it is possible to work & 1 \\\hline
   Museum & Place which contains exhibitions of paintings \& art & 2\\\hline
   House & Place where it is possible to live & 1 \\\hline
  \end{tabular}
  \caption{Place types}
  \label{table:mobility_places}
  \end{table}
  
  \subsubsection{Relationships}
  Only Curator agents are given mobility as described in Table~\ref{table:mobility_relationships}. They are able to move to different places: House and Office.
   \begin{table}[ht!]
   \centering
  \begin{tabular}{|c|c|c|c|}
   \thead{Agent Types} & \thead{Mobile} & \thead{Place types} & \thead{Constraints} \\ \hline \hline
   ArtistManager &  & Office & -\\\hline
   Curator & \checkmark & Museum, Office \& House & -\\\hline
   Profiler &  & House & - \\\hline
  \end{tabular}
  \caption{Relationships between agent types and place types}
  \label{table:mobility_relationships}
  \end{table}
  
  \subsubsection{Cardinality}
  % TODO text
  
  \tikzstyle{custom_circle} = [draw, circle, minimum size=.5cm]
  
  \begin{figure}[ht!]
   \begin{tikzpicture}[node distance = 8cm, auto]
    % Cu -> Mu
    \node [block] (cu1) {Curator};
    \node [block, right of=cu1] (mu1) {Museum};
    \path [line] (cu1) -- node[custom_circle]{1}(mu1);
    
    % Cu -> Of
    \node [block, below of=cu1, node distance = 1cm] (cu2) {Curator};
    \node [block, right of=cu2] (of1) {Office};
    \path [line] (cu2) -- node[custom_circle]{2}(of1);
    
    % Cu -> Ho
    \node [block, below of=cu2, node distance = 1cm] (cu3) {Curator};
    \node [block, right of=cu3] (ho1) {House};
    \path [line] (cu3) -- node[custom_circle]{2}(ho1);
    
    % Am -> Of
    \node [block, below of=cu3, node distance = 1cm] (am) {ArtistManager};
    \node [block, right of=am] (of2) {Office};
    \path [line] (am) -- node[custom_circle]{1}(of2);
    
    % Pro -> Ho
    \node [block, below of=am, node distance = 1
    cm] (pro) {Profiler};
    \node [block, right of=pro] (ho2) {House};
    \path [line] (pro) -- node[custom_circle]{1}(ho2);
   \end{tikzpicture}
   
   \caption{Cardinality of each association agent-place}
   \label{figure:mobility_cardinality}
  \end{figure}

  
  \subsubsection{Travel paths}
  % TODO text
  
  % Curator:
  % Museum <-> House
  % Museum <-> Office
  
  
  %%%%%%
  
  
  \section{Agent Interaction Protocols} % task 2
  % Model interactions among agents in AgentUML
  
  
  \subsection{Overall protocol} % level 1
  % TODO Output: Detailed package and template diagrams 
  %              + brief description
  
  
  \subsection{Interactions among agents}
  % TODO Output: Sequence diagrams + brief description
  
  
  \subsection{Internal agent processing}
  % TODO Output: State chart diagrams + brief description


  %%%%%%
  
  
  \section{Behaviors design} % task 3
  % UML diagrams to design behavior of your agents
  
  % TODO UML class diagrams according to the descriptions 
  %      found in the reference

  
  %%%%%%
  
  \clearpage % TODO to remove
  
  \section{Role-based modeling} % task 4
  % Model your system using "Role based modeling" approach
  
  \subsection{Modeling}
  % TODO Task 4.1 Perform role-based modeling using
  %               RoMAS for the initial task.	
  
  \subsection{Comparison with GAIA}
  % TODO Task 4.2 Comment on differences in resulting
  %               designs of 4.1 and GAIA (from Task 1).
  % (i.e. Analysis phase of GAIA against performing 
  %  role-based modeling as first step to GAIA analysis)

  
  %%%%%%
  
  
  \section{JADE and other agent platforms} % task 5
  % There are number of implementations of agent platforms which conform to 
  % FIPA specifications. Perform a comparison of at least 2 other agent 
  % platforms with JADE
  
  % Some other platforms: Agent Development Kit, FIPA-OS, 
  %                       Jack Intelligent Agents, ZEUS, 
  %                       SAGE, ...
  % TODO choose 2 of them
  
  \subsection{platform 1} % TODO to choose
  
  \subsubsection{Architecture}
  % TODO Architecture of platform
  
  \subsubsection{Services provided}
  % TODO Services provided by platform
  
  \subsubsection{Simple scenario}
  % TODO Comparison of implementation of a simple scenario same as Question 2 (??)
  % (i.e. service implementation, service registration and service discovery)
  
  \subsubsection{Notable projects}
  % TODO List some notable projects which use that platform
  
  \subsubsection{Personnel opinion}
  % TODO Your personnel opinion/judgment about the platform as compared to JADE
  % Yo can take part 3 (simple scenario) as your starting point, and explain the 
  % architecture and services the platform provides from a practical point of view
  
  \subsection{platform 2} % TODO to choose 
  
  \subsubsection{Architecture}
  % TODO Architecture of platform
  
  \subsubsection{Services provided}
  % TODO Services provided by platform
  
  \subsubsection{Simple scenario}
  % TODO Comparison of implementation of a simple scenario same as Question 2 (??)
  % (i.e. service implementation, service registration and service discovery)
  
  \subsubsection{Notable projects}
  % TODO List some notable projects which use that platform
  
  \subsubsection{Personnel opinion}
  % TODO Your personnel opinion/judgment about the platform as compared to JADE
  % Yo can take part 3 (simple scenario) as your starting point, and explain the 
  % architecture and services the platform provides from a practical point of view
  
  
  %%%%%%
  
  
  \section{Conclusion}
  % TODO what this project gave us ?

  
% bibliography
%\bibliographystyle{plainurl}
%\bibliography{references}

\end{document}